'use strict';import{jsPanel}from'../../jspanel.min.js';jsPanel.contextmenu||(jsPanel.contextmenu={version:'1.0.0',date:'2018-03-16 14:30',defaults:{dragit:!1,resizeit:!1,header:!1,headerControls:'none'},cmOverflow(a){let b=a.cmEvent.clientX,c=a.cmEvent.clientY,d=a.offsetWidth,f=a.offsetHeight,g=window.innerWidth-(b+d),h=window.innerHeight-(c+f);0>g&&(a.style.left=b+(window.scrollX||window.pageXOffset)-d+'px'),0>h&&(a.style.top=c+(window.scrollY||window.pageYOffset)-f+'px')},create(a={},b='contextmenu'){a.paneltype='contextmenu';let c=a.target;return!!c&&void('string'==typeof c&&(c=document.querySelector(c)),c.addEventListener(b,d=>{d.preventDefault(),document.querySelectorAll('.jsPanel-contextmenu').forEach(i=>{i.close()});let f=(d.pageX||d.touches[0].pageX)+'px',g=(d.pageY||d.touches[0].pageY)+'px',h=a;a.config&&(h=Object.assign({},a.config,a),delete h.config),h=Object.assign({},this.defaults,h,{position:!1,container:'body'}),jsPanel.create(h,i=>{jsPanel.setStyle(i,{position:'absolute',left:f,top:g});let j=c.closest('.jsPanel-modal');if(j)i.style.zIndex=j.style.zIndex;else{let k=c.closest('.jsPanel');k&&k.front(),i.style.zIndex=jsPanel.zi.next()}i.cmEvent=d,jsPanel.contextmenu.cmOverflow(i),i.addEventListener('mouseleave',()=>{i.close()},!1),i.addEventListener(jsPanel.evtStart,k=>{k.stopPropagation()},!1)})},!1))}},jsPanel.ajaxAlwaysCallbacks.push(function(a){a.classList.contains('jsPanel-contextmenu')&&jsPanel.contextmenu.cmOverflow(a)}),document.addEventListener(jsPanel.pointerdown,function(a){document.querySelectorAll('.jsPanel-contextmenu').forEach(function(b){a.target.closest('.jsPanel-contextmenu')||b.close()})},!1));