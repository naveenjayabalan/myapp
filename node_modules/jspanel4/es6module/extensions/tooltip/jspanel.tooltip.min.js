'use strict';import{jsPanel}from'../../jspanel.min.js';jsPanel.tooltip||(jsPanel.tooltip={version:'1.0.0',date:'2018-03-13 09:40',defaults:{border:'1px solid',dragit:!1,resizeit:!1,headerControls:'none',delay:400,ttipEvent:'mouseover'},create(a={},b){a.paneltype='tooltip',a.id?'function'==typeof a.id&&(a.id=a.id()):a.id=`jsPanel-${jsPanel.idCounter+=1}`;let f,c=a.target,d=a.mode||'default';if(!c)return!1;'string'==typeof c&&(c=document.querySelector(c)),c.addEventListener(jsPanel.evtStart,h=>{h.stopPropagation()},!1);let g=a;a.config&&(g=Object.assign({},a.config,a),delete g.config),g=Object.assign({},this.defaults,g),g.position=Object.assign({},a.position),g.position.of=a.position.of||c,c.addEventListener(g.ttipEvent,()=>{f=window.setTimeout(function(){return!document.getElementById(a.id)&&void jsPanel.create(g,h=>{if('default'===d?c.addEventListener('mouseleave',()=>{h.close()},!1):'semisticky'===d&&h.addEventListener('mouseleave',()=>{h.close()},!1),h.classList.add('jsPanel-tooltip'),h.style.overflow='visible',h.header.style.cursor='default',h.footer.style.cursor='default',c.closest('.jsPanel-modal')?h.style.zIndex=c.closest('.jsPanel-modal').style.zIndex:(c.closest('.jsPanel')&&c.closest('.jsPanel').front(),h.style.zIndex=jsPanel.zi.next()),h.addEventListener(jsPanel.evtStart,function(i){i.stopPropagation()},!1),g.connector){let i='string'==typeof g.position.of?document.querySelector(g.position.of):g.position.of,j=jsPanel.tooltip.relativeTipPos(h,i);h.append(jsPanel.tooltip.addConnector(h,j))}b&&b.call(h,h)})},g.delay)},!1),c.addEventListener('mouseout',()=>{window.clearTimeout(f)},!1)},relativeTipPos(a,b){let j,c=a.getBoundingClientRect(),d=b.getBoundingClientRect(),f=Math.round(d.left-c.right),g=Math.round(d.top-c.bottom),h=Math.round(c.left-d.right),i=Math.round(c.top-d.bottom);return j=0<=g?0<=f?'left-top':0<=h?'right-top':'top':0<=i?0<=f?'left-bottom':0<=h?'right-bottom':'bottom':0<=f?'left':0<=h?'right':'over',j},addConnector(a,b){let c,d,f,g,h=document.createElement('div');return h.className=`jsPanel-connector jsPanel-connector-${b}`,'top'===b?a.style.top=parseFloat(a.style.top)-12+'px':'right'===b?a.style.left=parseFloat(a.style.left)+12+'px':'bottom'===b?a.style.top=parseFloat(a.style.top)+12+'px':'left'==b&&(a.style.left=parseFloat(a.style.left)-12+'px'),g='string'==typeof a.options.connector?a.options.connector:window.getComputedStyle(a).borderBottomColor,f=b.match(/-/)?{left:c,top:d,backgroundColor:g}:{left:c,top:d,[`border-${b}-color`]:g},jsPanel.setStyle(h,f),h},removeConnector(a){const b=a.querySelector('.jsPanel-connector');a.removeChild(b)}},document.addEventListener(jsPanel.pointerdown,function(a){document.querySelectorAll('.jsPanel-tooltip').forEach(function(b){a.target.closest('.jsPanel-tooltip')||b.close()})},!1));